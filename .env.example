# Authgear Production Configuration
# Copy this file to .env and fill in the values

# ===== DEPLOYMENT MODE =====
DEV_MODE=false
LOG_LEVEL=warn
TRUST_PROXY=true

# ===== DOMAIN CONFIGURATION =====
# Main authentication domain
AUTH_DOMAIN=auth.maximal-limit.cz
# Portal domain
PORTAL_DOMAIN=portal.maximal-limit.cz

# ===== DATABASE CONFIGURATION =====
# PostgreSQL credentials - CHANGE THESE!
POSTGRES_USER=authgear_user
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD_HERE
POSTGRES_DB=authgear_production

# Database URLs
DATABASE_URL=postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}?sslmode=disable
DATABASE_SCHEMA=public
AUDIT_DATABASE_URL=postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}?sslmode=disable
AUDIT_DATABASE_SCHEMA=audit
SEARCH_DATABASE_URL=postgres://${POSTGRES_USER}:${POSTGRES_PASSWORD}@postgres:5432/${POSTGRES_DB}?sslmode=disable
SEARCH_DATABASE_SCHEMA=search

# ===== REDIS CONFIGURATION =====
# Redis password - CHANGE THIS!
REDIS_PASSWORD=CHANGE_ME_REDIS_PASSWORD_HERE
REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/0
ANALYTIC_REDIS_URL=redis://:${REDIS_PASSWORD}@redis:6379/1

# ===== OBJECT STORAGE (MinIO) =====
# MinIO credentials - CHANGE THESE!
MINIO_ROOT_USER=authgear_minio
MINIO_ROOT_PASSWORD=CHANGE_ME_MINIO_PASSWORD_HERE

IMAGES_OBJECT_STORE_TYPE=MINIO
IMAGES_OBJECT_STORE_MINIO_ENDPOINT=http://minio:9000
IMAGES_OBJECT_STORE_MINIO_BUCKET_NAME=authgear-images
IMAGES_OBJECT_STORE_MINIO_ACCESS_KEY_ID=${MINIO_ROOT_USER}
IMAGES_OBJECT_STORE_MINIO_SECRET_ACCESS_KEY=${MINIO_ROOT_PASSWORD}

USEREXPORT_OBJECT_STORE_TYPE=MINIO
USEREXPORT_OBJECT_STORE_MINIO_ENDPOINT=http://minio:9000
USEREXPORT_OBJECT_STORE_MINIO_BUCKET_NAME=authgear-userexport
USEREXPORT_OBJECT_STORE_MINIO_ACCESS_KEY_ID=${MINIO_ROOT_USER}
USEREXPORT_OBJECT_STORE_MINIO_SECRET_ACCESS_KEY=${MINIO_ROOT_PASSWORD}

# ===== AUTHGEAR CONFIGURATION =====
CONFIG_SOURCE_TYPE=database
CUSTOM_RESOURCE_DIRECTORY=/app
APP_CUSTOM_RESOURCE_DIRECTORY=/app

AUTHGEAR_APP_ID=accounts
AUTHGEAR_CLIENT_ID=portal
AUTHGEAR_ENDPOINT=https://${AUTH_DOMAIN}
AUTHGEAR_ENDPOINT_INTERNAL=http://nginx:3100
AUTHGEAR_WEB_SDK_SESSION_TYPE=refresh_token
ADMIN_API_ENDPOINT=http://authgear:3002
APP_HOST_SUFFIX=.${AUTH_DOMAIN}

# ===== BACKUP CONFIGURATION =====
BACKUP_RETENTION_DAYS=30
BACKUP_PATH=/var/backups/authgear
